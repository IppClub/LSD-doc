# 战场环境变量

```{admonition} 作者
&emsp;&emsp;瑾
```

&emsp;&emsp;战场环境变量是一套会实时改变怪物的战斗能力的数值系统。环境变量的选择来源于自然环境中的气象和气候参数。

## 战场环境变量的应用方案

&emsp;&emsp;1、在单局战斗中随机生成一组环境变量情况，单局中相对稳定或是设置随时间流逝变化的函数。  
&emsp;&emsp;2、不同的环境变量会通过不同的场景美术实时渲染方案进行展现，如飘雪、下雨、电闪雷鸣等环境效果。  
&emsp;&emsp;3、怪物属性依照不同的怪物设定会与不同环境变量发生关联变化。  
&emsp;&emsp;4、游戏时间流逝有两种模式，从傍晚进入夜晚（从白天到黑夜）切换，或是从凌晨进入清晨（从黑夜到白天）的两种时间段切换模式，白天是高温状态，黑夜是低温状态，随时间流逝，气温会有变化的过程。可以在玩家解锁气象监测道具后，在屏幕HUD上增加时间流逝的展示UI。  
&emsp;&emsp;5、在学员AI训练时环境变量将使用一组固定的偏向战场平均环境情况的默认数值。

## 战场环境变量的可选参数表

|名称|缩写|示例|说明|
|:-:|:-:|:-:|-|
|时间|TM|18:00| |
|光通量|Φ|40lm|1lm等于由一个具有1cd (坎德拉)均匀的发光强度的点光源在1sr(球面度)单位立体角内发射的光通量。一只40W的普通白炽灯的标称光通量为360lm，40W日光色荧光灯的标称光通量为2100lm，而400W标准型高压钠灯的光通量可达48000lm。|
|能见度|V|12km|1.能见度20-30公里，能见度极好，视野清晰。2.能见度15-25公里，能见度好，视野较清晰。3.能见度10-20公里，能见度一般。4.能见度5-15公里，能见度较差，视野不清晰。5.能见度1-10公里，轻雾，能见度差，视野不清晰。6.能见度0.3-1公里，大雾，能见度很差。7.能见度小于0.3公里，重雾，能见度极差。8.能见度小于0.1公里，浓雾，能见度极差。9.能见度不足100米通常被认为为零。|
|温度|T|℃|中国极端最高气温49.6℃，出现在新疆的吐鲁番盆地。中国极端最低气温-52.3℃，出现在黑龙江省漠河。|
|气压|海平面气压SLP|kpa|由于大气的密度是不均匀的，随海拔的改变而有很大变化，但在近地面的空间可以认为近似不变的，几千米的海拔，范围内满足12mmHg/Km，即海拔每升高一千米，气压下降12毫米汞柱，以海拔0时的大气压为760mmHg，则某一海拔高度h的大气压强为P=760-h*12mmHg/Km。|
|降雨量|RF|200mm|通常说的小雨、中雨、大雨、暴雨等，一般以日降雨量衡量。其中小雨指日降雨量在10毫米以下；中雨日降雨量为10~24.9毫米；大雨降雨量为25~49.9毫米；暴雨降雨量为50~99.9毫米；大暴雨降雨量为100~250毫米；特大暴雨降雨量在250毫米以上。|
|细颗粒物|PM25|59μg/m³|24小时PM2.5平均值标准值，优0~35μg/m³，良35~75μg/m³，轻度污染75~115μg/m³，中度污染115~150μg/m³，重度污染150~250μg/m³，严重污染大于250μg/m³及以上。|
|湿度|RH|80%|相对湿度表示空气中的水蒸气饱和值，取值范围为[0%,100%]。相对湿度通常与气温、气压共同作用于人体。现代医疗气象研究表明，对人体比较适宜的相对湿度为：夏季室温25℃时，相对湿度控制在40%－50%比较舒适；冬季室温20℃时，相对湿度控制在60%－70%。夏季三伏时节，由于高温、低压、高湿的作用，人体汗液不易排出，出汗后不易被蒸发掉，因而会使人烦躁、疲倦、食欲不振；冬季湿度有时太小，空气过于干燥，易引起上呼吸道粘膜感染，患上感冒。据科学试验，在气温日际变化大于3℃、气压日际变化大于10百帕，相对湿度日际变化大于10%时，关节炎的发病率会显著增加。|
|风向|WD|东南风|NEWS|
|风级|WS|3级|0-17级，12级为飓风|
|风速|WSE|12km/h|热带低气压风速6-7级，11.4米/秒至17.2米/秒，41—62公里/每小时；热带风暴风速8-9级，17.5米/秒至24.2米/秒，63—87公里/每小时；强热带风暴风速10-11级，24.5米/秒至32.5米/秒，88—117公里/每小时；台风风速12-13级，32.8米/秒至41.4米/秒，118—149公里/每小时；强台风风速14-15级，41.7米/秒至51.1米/秒，150—184公里/每小时；超强台风风速16级以上，51.4米/秒以上，185公里/每小时以上。|


## 单局战场游戏的环境变量设置表

|变量名|值|说明|
|:-|:-:|-|
|时间模式|昼到夜 or 夜到昼|
|能见度|？km|
|风向|N|
|风级|3级|
|湿度|80%|
|PM2.5|59μg/m³|
|气压|760|
|最高气温|？℃|
|最低气温|？℃|
|气温变化函数|预制函数 Linear, Quad, Sine and etc|
|降雨地形|数组|
|&emsp;&emsp;- 降雨区域|x, y, width, height|
|&emsp;&emsp;- 降雨量|？mm|
|&emsp;&emsp;- 降雨开始时间|游戏开始后 ？s|
|&emsp;&emsp;- 降雨变化函数|预制函数 None, Linear, Quad, Sine and etc|
|&emsp;&emsp;- 降雨持续时间|？s|
|异常光照地形|数组|
|&emsp;&emsp;- 光照区域|x, y, width, height|
|&emsp;&emsp;- 光通量|？lm|
|&emsp;&emsp;- 光照开始时间|游戏开始后 ？s|
|&emsp;&emsp;- 光照变化函数|预制函数 None, Linear, Quad, Sine and etc|
|&emsp;&emsp;- 光照持续时间|？s|